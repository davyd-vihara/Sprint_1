# Тестирование приложения BooksCollector

## Фикстуры

### `one_book`
Создаёт коллекцию с одной книгой:
- «Гордость и предубеждение и зомби» — жанр «Ужасы».

### `several_books`
Создаёт коллекцию с несколькими книгами:
- «Шрек» — жанр «Мультфильмы»  
- «Оно» — жанр «Ужасы»  
- «Гарри Поттер» — жанр «Фантастика»

---

## Тесты

### Тест 1: `test_add_new_book_add_two_books`

**Описание:**  
Проверяет добавление второй книги в коллекцию.

**Что проверяет:**  
После добавления второй книги общее количество записей в словаре должно быть равно 2.

**Данные:**  
- Используется фикстура `one_book` (в коллекции уже есть 1 книга).  
- Добавляется книга `'Что делать, если ваш кот хочет вас убить'`.

**Ожидаемый результат:**  
Метод `get_books_genre()` возвращает словарь из двух элементов.

---

### Тест 2: `test_set_book_genre_sets_correct_genre`

**Описание:**  
Проверяет, что при добавлении книги с жанром `'Ужасы'` метод возвращает правильное значение.

**Что проверяет:**  
Метод `get_book_genre` возвращает ожидаемый жанр.

**Данные:**  
Используется фикстура `one_book`.

**Ожидаемый результат:**  
Жанр книги `'Гордость и предубеждение и зомби'` — `'Ужасы'`.

---

### Тест 3: `test_set_book_genre_does_not_affect_other_books`

**Описание:**  
Проверяет, что установка жанра для одной книги не влияет на другие.

**Что проверяет:**  
Если книга добавлена без указания жанра, метод `get_book_genre` возвращает пустую строку.

**Данные:**  
Добавляется книга `'Кот в сапогах'`.

**Ожидаемый результат:**  
`get_book_genre('Кот в сапогах') == ''`.

---

### Тест 4: `test_add_new_book_name_len_limit`

**Описание:**  
Параметризованный тест, проверяющий ограничение длины названия книги.

**Что проверяет:**  
Добавление книги разрешено, если длина названия от 1 до 40 символов.

**Данные:**  
Проверяются названия длиной:  
- 1 символ  
- 40 символов  
- 0 символов (пустая строка)  
- 41 символ  

**Ожидаемый результат:**  
Книга добавляется только при длине ≤ 40 символов.

---

### Тест 5: `test_get_books_with_specific_genre`

**Описание:**  
Проверяет фильтрацию книг по жанру.

**Что проверяет:**  
Метод `get_books_with_specific_genre` возвращает список книг нужного жанра.

**Данные:**  
Используется фикстура `several_books` (несколько книг с разными жанрами).

**Ожидаемый результат:**  
Для жанра `'Мультфильмы'` возвращается список `['Шрек']`.

---

### Тест 6: `test_get_books_for_children`

**Описание:**  
Проверяет, что метод корректно возвращает только книги, разрешённые для детей.

**Что проверяет:**  
Метод `get_books_for_children` исключает книги из «взрослых» жанров (`Ужасы`, `Детективы`, `Фантастика`).

**Данные:**  
Используется фикстура `several_books` с книгами разных жанров.

**Ожидаемый результат:**  
Метод возвращает `['Шрек', 'Гарри Поттер']`.

---

### Тест 7: `test_set_book_genre_updates_existing_genre`

**Описание:**  
Параметризованный тест. Проверяет возможность изменения жанра существующей книги.

**Что проверяет:**  
Метод `set_book_genre` корректно обновляет жанр, если он входит в список допустимых жанров.

**Данные:**  
Жанры для проверки: `'Фантастика'`, `'Комедии'`, `'Ужасы'`, `'Детективы'`, `'Мультфильмы'`.

**Ожидаемый результат:**  
Метод `get_book_genre` возвращает обновлённое значение.

---

### Тест 8: `test_set_book_genre_invalid_genre`

**Описание:**  
Проверяет поведение при попытке установить несуществующий жанр.

**Что проверяет:**  
Жанр книги не должен измениться, если передан недопустимый жанр.

**Ожидаемый результат:**  
Жанр остаётся прежним (`'Ужасы'`).

---

### Тест 9: `test_add_book_in_favorites_adds_book`

**Описание:**  
Проверяет добавление книги в список избранных.

**Что проверяет:**  
Метод `add_book_in_favorites` корректно добавляет книгу в избранное.

**Ожидаемый результат:**  
Список избранных содержит книгу `'Гордость и предубеждение и зомби'`.

---

### Тест 10: `test_delete_book_from_favorites_removes_book`

**Описание:**  
Проверяет удаление книги из списка избранных.

**Что проверяет:**  
После удаления книга исчезает из списка избранных.

**Ожидаемый результат:**  
`get_list_of_favorites_books()` возвращает пустой список.

---
